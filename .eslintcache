[{"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/index.js":"1","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/reportWebVitals.js":"2","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/App.js":"3","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Main.js":"4","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/ImagePopup.js":"5","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/EditProfilePopup.js":"6","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/AddPlacePopup.js":"7","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/PopupWithForm.js":"8","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Header.js":"9","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Footer.js":"10","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/EditAvatarPopup.js":"11","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/contexts/CurrentUserContext.js":"12","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/utils/api.js":"13","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Card.js":"14","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Login.js":"15","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Register.js":"16","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/AlertPopup.js":"17","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/ProtectedRoute.js":"18","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/utils/auth.js":"19"},{"size":641,"mtime":1614714700000,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":1613148069000,"results":"22","hashOfConfig":"21"},{"size":8278,"mtime":1614609976820,"results":"23","hashOfConfig":"21"},{"size":1743,"mtime":1613148069000,"results":"24","hashOfConfig":"21"},{"size":683,"mtime":1614433924054,"results":"25","hashOfConfig":"21"},{"size":1889,"mtime":1614371242282,"results":"26","hashOfConfig":"21"},{"size":1539,"mtime":1613148069000,"results":"27","hashOfConfig":"21"},{"size":809,"mtime":1613148069000,"results":"28","hashOfConfig":"21"},{"size":943,"mtime":1614604123866,"results":"29","hashOfConfig":"21"},{"size":232,"mtime":1613148069000,"results":"30","hashOfConfig":"21"},{"size":940,"mtime":1613148069000,"results":"31","hashOfConfig":"21"},{"size":85,"mtime":1613148069000,"results":"32","hashOfConfig":"21"},{"size":3101,"mtime":1613148069000,"results":"33","hashOfConfig":"21"},{"size":1586,"mtime":1613148069000,"results":"34","hashOfConfig":"21"},{"size":1189,"mtime":1614541621502,"results":"35","hashOfConfig":"21"},{"size":1518,"mtime":1614524600252,"results":"36","hashOfConfig":"21"},{"size":903,"mtime":1614602903761,"results":"37","hashOfConfig":"21"},{"size":322,"mtime":1614444294044,"results":"38","hashOfConfig":"21"},{"size":1156,"mtime":1614608199368,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"43"},"1jt6dx3",{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48","usedDeprecatedRules":"43"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"43"},"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/index.js",["81"],"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter,HashRouter } from 'react-router-dom';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter basename={process.env.PUBLIC_URL}>\n    <App/> \n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n",["82","83"],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/reportWebVitals.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/App.js",["84"],"import React from 'react';\nimport '../App.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport AddPlacePopup from './AddPlacePopup';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport * as auth from '../utils/auth';\nimport AlertPopup from './AlertPopup';\n\nfunction App() {\n    const [isEditAvatarOpened, setIsEditAvatarOpened] = React.useState(false);\n    const [isEditProfileOpened, setIsEditProfileOpened] = React.useState(false);\n    const [isAddPlaceOpened, setIsAddPlaceOpened] = React.useState(false);\n    const [isSubmitDeleteOpened, setIsSubmitDeleteOpened] = React.useState(false);\n    const [isAlertPopupOpened, setIsAlertPopupOpened] = React.useState(false)\n    const [selectedCard, setSelectedCard] = React.useState(null);\n    const [currentUser, setCurrentUserInfo] = React.useState({});\n    const [loggedIn, setLoggedIn] = React.useState(null);\n    const [registerStatus, setRegisterStatus] = React.useState(false)\n    const [registerState, setRegisterState] = React.useState(false);\n    const [userName,setUsername] = React.useState('')\n    const history = useHistory();\n    React.useEffect(() => {\n        api.getUserInfo()\n            .then((currentUser) => {\n                setCurrentUserInfo(currentUser);\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }, []);\n\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarOpened(true);\n    }\n    function handleSetRegisterState() {\n        setRegisterState(!registerState);\n    }\n\n    function handleEditProfileClick() {\n        setIsEditProfileOpened(true);\n    }\n    function handleAddPlaceClick() {\n        setIsAddPlaceOpened(true);\n    }\n    function handleSubmitDeleteClick() {\n        setIsSubmitDeleteOpened(true);\n    }\n    function closeAllPopups() {\n        setIsEditAvatarOpened(false);\n        setIsEditProfileOpened(false);\n        setIsAddPlaceOpened(false);\n        setSelectedCard(null);\n        setIsSubmitDeleteOpened(false);\n        setIsAlertPopupOpened(false);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card);\n    }\n    function handleUpdateUser(data) {\n        api.patchUserInfo(data)\n            .then((currentUser) => {\n                setCurrentUserInfo(currentUser);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n\n    }\n    function handleUpdateAvatar(data) {\n        api.patchAvatar(data)\n            .then((currentUser) => {\n                setCurrentUserInfo(currentUser);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n    function handleAddCard(data) {\n        api.postNewCard(data)\n            .then((newCard) => {\n                setCards([newCard, ...cards]);\n                closeAllPopups();\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n    const [cards, setCards] = React.useState([]);\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\n        api.changeLikeCardStatus(card._id, !isLiked)\n            .then((newCard) => {\n                const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n    function handleCardDelete(card) {\n        api.removeCard(card._id)\n            .then(() => {\n                const newCards = cards.filter((c) => {\n                    return c._id !== card._id\n                })\n                setCards(newCards);\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n    }\n\n\n    function handleRegister(data) {\n        auth.register(data)\n            .then((res) => {\n                if (res.data) {\n                    setIsAlertPopupOpened(true);\n                    setRegisterStatus(true);\n                    history.push('/sign-in');\n                    setRegisterState(false);\n                } else {\n                    setIsAlertPopupOpened(true);\n                    setRegisterStatus(false);\n                    setRegisterState(true);\n                }\n\n            })\n            .catch((err) => {\n                console.log(err);\n            })\n    }\n    function handleLogin(data) {\n        auth.authorize(data)\n            .then((res) => {\n                console.log(data)\n                if (res.token) {\n                    localStorage.setItem('jwt', res.token);\n                    setLoggedIn(true);\n                    setUsername(data.email);\n                    history.push('/');\n                    \n                } else {\n                    setLoggedIn(false);\n                    setIsAlertPopupOpened(true);\n                    setRegisterStatus(false);\n                    setRegisterState(false);\n                }\n            })\n            \n            .catch((err) => {\n                console.log(err);\n            })\n    }\n    function handleLogout() {\n        localStorage.removeItem('jwt');\n        setLoggedIn(false);\n    }\n    function handleTokenCheck(jwt) {\n        auth.checkToken(jwt)\n            .then((res) => {\n                setUsername(res.data.email)\n                if (res) {\n                    setLoggedIn(true);\n                    history.push('/');\n                }\n            })\n           \n    }\n\n\n    React.useEffect(() => {\n        api.getInitialCards()\n            .then((initialCards => {\n                setCards(initialCards);\n            }))\n\n            .catch((err) => {\n                console.log(err);\n            });\n    }, []);\n\n    React.useEffect(() => {\n        const jwt = localStorage.getItem('jwt');\n        if (jwt) {\n            handleTokenCheck(jwt);\n            \n        }\n    }, []);\n\n\n    return (\n        <CurrentUserContext.Provider value={currentUser}>\n            <div className=\"page\">\n                <Header userName={userName} handleLogout={handleLogout} handleRegisterState={handleSetRegisterState} registerState={registerState} state={loggedIn} />\n\n                <Switch>\n                    {/* HOC - component */}\n                    <ProtectedRoute exact path='/' component={Main} loggedIn={loggedIn} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete}\n                        handleSubmitDeleteClick={handleSubmitDeleteClick} handleCardClick={handleCardClick} handleEditAvatarClick={handleEditAvatarClick}\n                        handleAddPlaceClick={handleAddPlaceClick} handleEditProfileClick={handleEditProfileClick} />\n\n                    <Route path='/sign-up'>\n                        <Register handleRegister={handleRegister} />\n                    </Route>\n                    <Route path='/sign-in'>\n                        <Login handleLogin={handleLogin} />\n                    </Route>\n                </Switch>\n\n                <Footer />\n\n                {/* Popups components */}\n                <AlertPopup state={registerStatus} isOpened={isAlertPopupOpened} onClose={closeAllPopups} />\n                <EditProfilePopup onUpdateUser={handleUpdateUser} isOpened={isEditProfileOpened} onClose={closeAllPopups} />\n                <AddPlacePopup onAddCard={handleAddCard} isOpened={isAddPlaceOpened} onClose={closeAllPopups} />\n                <EditAvatarPopup onUpdateAvatar={handleUpdateAvatar} isOpened={isEditAvatarOpened} onClose={closeAllPopups} />\n                <PopupWithForm button='Да' name='submit' title='Вы уверены?' isOpened={isSubmitDeleteOpened} onClose={closeAllPopups} />\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n            </div>\n        </CurrentUserContext.Provider>\n    );\n}\n\nexport default App;\n","/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Main.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/ImagePopup.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/EditProfilePopup.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/AddPlacePopup.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/PopupWithForm.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Header.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Footer.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/EditAvatarPopup.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/contexts/CurrentUserContext.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/utils/api.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Card.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Login.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/Register.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/AlertPopup.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/components/ProtectedRoute.js",[],"/Users/kozhevatovv/Desktop/ReactApp/react-mesto-auth/src/utils/auth.js",[],{"ruleId":"85","severity":1,"message":"86","line":5,"column":10,"nodeType":"87","messageId":"88","endLine":5,"endColumn":23},{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","replacedBy":"92"},{"ruleId":"93","severity":1,"message":"94","line":204,"column":8,"nodeType":"95","endLine":204,"endColumn":10,"suggestions":"96"},"no-unused-vars","'BrowserRouter' is defined but never used.","Identifier","unusedVar","no-native-reassign",["97"],"no-negated-in-lhs",["98"],"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'handleTokenCheck'. Either include it or remove the dependency array.","ArrayExpression",["99"],"no-global-assign","no-unsafe-negation",{"desc":"100","fix":"101"},"Update the dependencies array to be: [handleTokenCheck]",{"range":"102","text":"103"},[6335,6337],"[handleTokenCheck]"]